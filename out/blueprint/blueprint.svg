<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="674px" preserveAspectRatio="none" style="width:486px;height:674px;background:#FFFFFF;" version="1.1" viewBox="0 0 486 674" width="486px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="263.4844" style="stroke:#000000;stroke-width:1.5;" width="470.5" x="10" y="313.3516"/><rect fill="none" height="173.5527" style="stroke:#000000;stroke-width:1.5;" width="395.5" x="75" y="396.2832"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="81.4883" y2="593.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="109" x2="109" y1="81.4883" y2="593.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="286.5" x2="286.5" y1="81.4883" y2="593.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="78.5352">User</text><ellipse cx="38.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.5,21.5 L38.5,48.5 M25.5,29.5 L51.5,29.5 M38.5,48.5 L25.5,63.5 M38.5,48.5 L51.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="606.3711">User</text><ellipse cx="38.5" cy="617.8242" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.5,625.8242 L38.5,652.8242 M25.5,633.8242 L51.5,633.8242 M38.5,652.8242 L25.5,667.8242 M38.5,652.8242 L51.5,667.8242 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="85" y="78.5352">Server</text><path d="M89,37 L89,61 M89,49 L106,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="118" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="85" y="606.3711">Server</text><path d="M89,613.3242 L89,637.3242 M89,625.3242 L106,625.3242 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="118" cy="625.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="259.5" y="78.5352">Service</text><ellipse cx="286.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="282.5,37,288.5,32,286.5,37,288.5,42,282.5,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="259.5" y="606.3711">Service</text><ellipse cx="286.5" cy="625.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="282.5,613.3242,288.5,608.3242,286.5,613.3242,288.5,618.3242,282.5,613.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="151.5" y1="112.7988" y2="112.7988"/><line style="stroke:#181818;stroke-width:1.0;" x1="151.5" x2="151.5" y1="112.7988" y2="125.7988"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="151.5" y1="125.7988" y2="125.7988"/><polygon fill="#181818" points="120.5,121.7988,110.5,125.7988,120.5,129.7988,116.5,125.7988" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="116.5" y="108.0566">create shared memory</text><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="151.5" y1="155.1094" y2="155.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="151.5" x2="151.5" y1="155.1094" y2="168.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="151.5" y1="168.1094" y2="168.1094"/><polygon fill="#181818" points="120.5,164.1094,110.5,168.1094,120.5,172.1094,116.5,168.1094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="116.5" y="150.3672">open loopback tcp</text><polygon fill="#181818" points="120.5,193.4199,110.5,197.4199,120.5,201.4199,116.5,197.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="114.5" x2="285.5" y1="197.4199" y2="197.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="126.5" y="192.6777">connect to loopback tcp</text><polygon fill="#181818" points="274.5,222.7305,284.5,226.7305,274.5,230.7305,278.5,226.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="280.5" y1="226.7305" y2="226.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="116.5" y="221.9883">accept connection</text><polygon fill="#181818" points="274.5,252.041,284.5,256.041,274.5,260.041,278.5,256.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="280.5" y1="256.041" y2="256.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="116.5" y="251.2988">send shared memory id</text><line style="stroke:#181818;stroke-width:1.0;" x1="286.5" x2="328.5" y1="285.3516" y2="285.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="328.5" x2="328.5" y1="285.3516" y2="298.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="287.5" x2="328.5" y1="298.3516" y2="298.3516"/><polygon fill="#181818" points="297.5,294.3516,287.5,298.3516,297.5,302.3516,293.5,298.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="293.5" y="280.6094">open shared memory</text><path d="M10,313.3516 L84,313.3516 L84,320.6621 L74,330.6621 L10,330.6621 L10,313.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="263.4844" style="stroke:#000000;stroke-width:1.5;" width="470.5" x="10" y="313.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="326.9199">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="26" x="99" y="325.9863">[job]</text><polygon fill="#181818" points="97.5,347.9727,107.5,351.9727,97.5,355.9727,101.5,351.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="103.5" y1="351.9727" y2="351.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="45.5" y="347.2305">request</text><polygon fill="#181818" points="274.5,377.2832,284.5,381.2832,274.5,385.2832,278.5,381.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="280.5" y1="381.2832" y2="381.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="116.5" y="376.541">send header</text><path d="M75,396.2832 L149,396.2832 L149,403.5938 L139,413.5938 L75,413.5938 L75,396.2832 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="173.5527" style="stroke:#000000;stroke-width:1.5;" width="395.5" x="75" y="396.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="90" y="409.8516">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102" x="164" y="408.918">[send and receive]</text><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="151.5" y1="434.9043" y2="434.9043"/><line style="stroke:#181818;stroke-width:1.0;" x1="151.5" x2="151.5" y1="434.9043" y2="447.9043"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="151.5" y1="447.9043" y2="447.9043"/><polygon fill="#181818" points="120.5,443.9043,110.5,447.9043,120.5,451.9043,116.5,447.9043" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="116.5" y="430.1621">copy to shared memory</text><line style="stroke:#181818;stroke-width:1.0;" x1="286.5" x2="328.5" y1="477.2148" y2="477.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="328.5" x2="328.5" y1="477.2148" y2="490.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="287.5" x2="328.5" y1="490.2148" y2="490.2148"/><polygon fill="#181818" points="297.5,486.2148,287.5,490.2148,297.5,494.2148,293.5,490.2148" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="293.5" y="472.4727">send current size</text><line style="stroke:#181818;stroke-width:1.0;" x1="286.5" x2="328.5" y1="519.5254" y2="519.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="328.5" x2="328.5" y1="519.5254" y2="532.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="287.5" x2="328.5" y1="532.5254" y2="532.5254"/><polygon fill="#181818" points="297.5,528.5254,287.5,532.5254,297.5,536.5254,293.5,532.5254" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="293.5" y="514.7832">copy from shared memory</text><polygon fill="#181818" points="120.5,557.8359,110.5,561.8359,120.5,565.8359,116.5,561.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="114.5" x2="285.5" y1="561.8359" y2="561.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="126.5" y="557.0938">send read size</text><!--MD5=[061865fb31e99a5f84dd33812aeb9278]
@startuml blueprint

actor User
boundary Server
control Service

Server -> Server: create shared memory
Server -> Server: open loopback tcp

Service -> Server: connect to loopback tcp
Server -> Service: accept connection
Server -> Service: send shared memory id
Service -> Service: open shared memory

loop job
    User -> Server: request
    Server -> Service: send header

    loop send and receive
        Server -> Server: copy to shared memory
        Service -> Service: send current size
        Service -> Service: copy from shared memory
        Service -> Server: send read size
    end
end

@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 KST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: KR
--></g></svg>